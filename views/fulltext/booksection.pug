case appconf.booksearchtype
  when "catalog"
    case appconf.catalogtype
      when "iii"
        - searchurl  = appconf.catalogurl + 'search/?searchtype=X&searcharg='
        - searchurl += encodeURIComponent(work_detail.work_title).replace(/%20/g, '+')
      when "alma"
        - searchurl = null
  when "openurl"
    - searchurl  = appconf.linkresolver + '?ctx_ver=Z39.88-2004&rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3A'
    - searchurl += 'book&rft.genre=bookitem&rft.atitle=' + encodeURIComponent(work_detail.work_title).replace(/%20/g, '+') + '&rft.btitle=' + work_detail.publication.replace(/%20/g, '+') + '&rft.date=' + work_detail.year + '&rft.isbn=' + work_detail.identifier
    each contrib in work_detail.contributors
      - searchurl += '&rft.au=' + encodeURIComponent(contrib.display_name)
