extends template

block content
  div.container
    div.row
      div.col.s0.m2.offset-m1.sidebar.z-depth-1
        include filters.pug
          
      div.col.s12.m9
        div.col.s12.m6
          h4.works-count Works Found: #{works_count}
        div.col.s12.m6.right-align
          p
            form(method="get", action="/works")
              label(for='resultsPerPage') Results Per Page:
              select#resultsPerPage.browser-default(name='limit')
                if limit == 10
                  option(selected) 10
                else
                  option 10
                if limit == 25
                  option(selected) 25
                else
                  option 25
                if limit == 50
                  option(selected) 50
                else
                  option 50
                if limit == 100
                  option(selected) 100
                else
                  option 100
              input(type="hidden", name="page", value="1")
        div.col.s12.center-align
          include pagination.pug
        ul.col.s12.collection.works
          each work in works_list
            li.collection-item.avatar
              p.title.work-title
                a(href="/works/"+ work.id)= work.work_title
              p.work-type= work.work_type
              p.contributors
                each contrib, index in work.contributors
                  case contrib.role
                    when "Author"
                    when "Performer"
                    when "Composer"
                    when "Creator"
                    when "Director"
                    when "Presenter"
                      if contrib.person_id
                        span
                          a(href="/people/" + contrib.person_id)= contrib.display_name
                      else
                        span= contrib.display_name
                      if index < work.contributors.length - 1
                        | ; 
              p.work-pub
                a(href="/publications/" + work.pubid)= work.publication
                span.work-date= work.year
        div.col.s12.center-align
          include pagination.pug
